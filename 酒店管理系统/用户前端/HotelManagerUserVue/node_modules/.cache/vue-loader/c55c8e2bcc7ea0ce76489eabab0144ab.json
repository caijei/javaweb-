{"remainingRequest":"C:\\Users\\贺小双\\Downloads\\酒店管理系统\\酒店管理系统\\用户前端\\HotelManagerUserVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\贺小双\\Downloads\\酒店管理系统\\酒店管理系统\\用户前端\\HotelManagerUserVue\\src\\views\\reservation.vue?vue&type=style&index=0&id=35ffdda2&scoped=scoped&lang=css&","dependencies":[{"path":"C:\\Users\\贺小双\\Downloads\\酒店管理系统\\酒店管理系统\\用户前端\\HotelManagerUserVue\\src\\views\\reservation.vue","mtime":1698855028000},{"path":"C:\\Users\\贺小双\\Downloads\\酒店管理系统\\酒店管理系统\\用户前端\\HotelManagerUserVue\\node_modules\\css-loader\\index.js","mtime":1678514552000},{"path":"C:\\Users\\贺小双\\Downloads\\酒店管理系统\\酒店管理系统\\用户前端\\HotelManagerUserVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678514556000},{"path":"C:\\Users\\贺小双\\Downloads\\酒店管理系统\\酒店管理系统\\用户前端\\HotelManagerUserVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1678514554000},{"path":"C:\\Users\\贺小双\\Downloads\\酒店管理系统\\酒店管理系统\\用户前端\\HotelManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678514554000},{"path":"C:\\Users\\贺小双\\Downloads\\酒店管理系统\\酒店管理系统\\用户前端\\HotelManagerUserVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1678514556000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.res-bg {\r\n    background: url(../assets/img/reservation.jpg);\r\n    background-size: cover;\r\n    height: 30vh;\r\n    border: 0px solid transparent;\r\n    border-bottom-left-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n}\r\n\r\n.text {\r\n    font-size: 14px;\r\n}\r\n\r\n.item {\r\n    padding: 9px 0;\r\n}\r\n\r\n.res-form {\r\n    margin: -5rem 1rem 1rem 1rem;\r\n}\r\n\r\n/* .el-card__body {\r\n    padding: 20px 20px 20px 0px;\r\n  } */\r\n\r\n.el-select {\r\n    width: 100%;\r\n}\r\n\r\n.room-price {\r\n    font-size: 1.3rem;\r\n    color: #f56c6c;\r\n}\r\n",{"version":3,"sources":["reservation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"reservation.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <el-container class=\"wrapper\">\r\n            <el-main class=\"section text-left\">\r\n                <div class=\"res-bg\"></div>\r\n                <el-card class=\"box-card res-form\">\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>预订客房</span>\r\n                    </div>\r\n                    <div class=\"text item\">\r\n                        <el-form :model=\"resinfo\" label-width=\"80px\">\r\n                            <el-form-item label=\"客房类型\">\r\n                                <div>{{ bookstat.roomType }}</div>\r\n                            </el-form-item>\r\n\r\n                            <el-form-item label=\"入住时间\">\r\n                                <el-col :span=\"24\">\r\n                                    <div>{{ bookstat.inTime }} 至</div>\r\n                                </el-col>\r\n                                <!-- <el-col class=\"line text-center\" :span=\"12\"></el-col> -->\r\n                                <el-col :span=\"24\">\r\n                                    <div>{{ bookstat.leaveTime }}</div>\r\n                                </el-col>\r\n                            </el-form-item>\r\n\r\n                            <el-form-item label=\"房间号码\">\r\n                                <div>{{ roomtype.number }}</div>\r\n                            </el-form-item>\r\n\r\n                            <el-form-item label=\"住店人数\">\r\n                                <el-input-number\r\n                                    v-model=\"resinfo.num\"\r\n                                    :min=\"1\"\r\n                                    :max=\"maxp\"\r\n                                    label=\"请输入\"\r\n                                ></el-input-number>\r\n                                <span class=\"ml-1\">人</span>\r\n                            </el-form-item>\r\n\r\n                            <el-form-item label=\"提供发票\">\r\n                                <el-switch\r\n                                    v-model=\"resinfo.isNeedInvoice\"\r\n                                ></el-switch>\r\n                            </el-form-item>\r\n\r\n                            <el-form-item label=\"价格\">\r\n                                <span v-model=\"resinfo.type\" class=\"room-price\"\r\n                                    >{{ sumprice }} 元</span\r\n                                >\r\n                            </el-form-item>\r\n\r\n                            <el-form-item>\r\n                                <el-button\r\n                                    type=\"primary\"\r\n                                    @click=\"submitForm('ruleForm')\"\r\n                                    style=\"font-size: 22px\"\r\n                                >\r\n                                    立即预订\r\n                                </el-button>\r\n                                <!-- <el-button @click=\"resetForm('ruleForm')\">重置</el-button> -->\r\n                            </el-form-item>\r\n                        </el-form>\r\n                    </div>\r\n                </el-card>\r\n            </el-main>\r\n            <el-footer class=\"footer\">\r\n                <footbar></footbar>\r\n            </el-footer>\r\n\r\n            <el-dialog title=\"提示\" :visible.sync=\"dialogVisible\" width=\"95%\">\r\n                <span>你确定要提交预订单吗？</span>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"dialogVisible = false\" style=\"font-size: 18px;\"> 取消</el-button>\r\n                    <el-button type=\"primary\" @click=\"confirmSubmitForm\"\r\n                        >确定</el-button\r\n                    >\r\n                </span>\r\n            </el-dialog>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport footbar from \"@/components/footbar.vue\";\r\nexport default {\r\n    data() {\r\n        return {\r\n            bookstat: {},\r\n            roomNumber: \"\",\r\n            resinfo: {\r\n                num: \"\",\r\n                isNeedInvoice: false,\r\n            },\r\n            price: 0,\r\n            sumprice: 0,\r\n            maxp: 1,\r\n            lockCondition: false,\r\n            isNotSelect: true,\r\n            checkBtnDis: false,\r\n            searchicon: \"el-icon-search\",\r\n            searchBtnType: \"primary\",\r\n            dialogVisible: false,\r\n            roomtype: \"\",\r\n        };\r\n    },\r\n    components: {\r\n        footbar,\r\n    },\r\n    methods: {\r\n        submitForm(formName) {\r\n            this.dialogVisible = true;\r\n        },\r\n        confirmSubmitForm() {\r\n            this.dialogVisible = false;\r\n            let json = {\r\n                roomId: this.bookstat.roomid,\r\n                inTime: this.bookstat.inTime,\r\n                leaveTime: this.bookstat.leaveTime,\r\n                realPeople: this.resinfo.num,\r\n                fapiao: this.fapiao,\r\n            };\r\n            console.log(json);\r\n            this.axios\r\n                .post(\"http://localhost:9151/user/bookRoom\", json)\r\n                .then((res) => {\r\n                    if (res.data.code != \"200\") {\r\n                        this.$message({\r\n                            message: \"登录信息过期\",\r\n                            type: \"error\",\r\n                        });\r\n                        this.$router.push(\"/\");\r\n                    } else {\r\n                        this.$router.push(\"/submitok\");\r\n                    }\r\n                })\r\n                .catch((res) => {\r\n                    this.$router.push(\"/submitfail\");\r\n                });\r\n        },\r\n        resolveData() {\r\n            // console.log(123123);\r\n            this.axios\r\n                .post(\r\n                    \"http://localhost:9151/user/roomDetail?roomId=\" +\r\n                        this.bookstat.roomid\r\n                )\r\n                .then((res) => {\r\n                    this.roomtype = res.data.data;\r\n                    console.log(this.roomtype);\r\n                    this.maxp = this.roomtype.maxPeople;\r\n                    this.price = this.roomtype.type.price;\r\n                    this.calcPrice();\r\n                })\r\n                .catch(() => {\r\n                    console.log(\"死了\");\r\n                });\r\n        },\r\n        changeTimeStr(str) {\r\n            str = str.toString();\r\n            str = str.replace(/ GMT.+$/, \"\"); // Or str = str.substring(0, 24)\r\n            let d = new Date(str);\r\n            let a = [\r\n                d.getFullYear(),\r\n                d.getMonth() + 1,\r\n                d.getDate(),\r\n                d.getHours(),\r\n                d.getMinutes(),\r\n                d.getSeconds(),\r\n            ];\r\n            for (var i = 0, len = a.length; i < len; i++) {\r\n                if (a[i] < 10) {\r\n                    a[i] = \"0\" + a[i];\r\n                }\r\n            }\r\n            str = a[0] + \"-\" + a[1] + \"-\" + a[2] + \" \" + a[3] + \":\" + a[4];\r\n            return str;\r\n        },\r\n        calcPrice() {\r\n            let stra = this.bookstat.leaveTime;\r\n            let sa1 = stra.split(\" \")[0].split(\"-\");\r\n            let sa2 = stra.split(\" \")[1].split(\":\");\r\n            let leaveTime = new Date();\r\n            leaveTime.setFullYear(sa1[0], sa1[1], sa1[2]);\r\n            leaveTime.setHours(sa2[0]);\r\n            leaveTime.setMinutes(sa2[1]);\r\n            let strb = this.bookstat.inTime;\r\n            let sb1 = strb.split(\" \")[0].split(\"-\");\r\n            let sb2 = strb.split(\" \")[1].split(\":\");\r\n            let inTime = new Date();\r\n            inTime.setFullYear(sb1[0], sb1[1], sb1[2]);\r\n            inTime.setHours(sb2[0]);\r\n            inTime.setMinutes(sb2[1]);\r\n            let realday = (leaveTime - inTime) / 86400000;\r\n            // console.log(Math.ceil(realday));\r\n            realday = Math.ceil(realday);\r\n            let price = this.price;\r\n            this.sumprice = price * realday;\r\n            // console.log(this.bookstat.leaveTime,this.bookstat.inTime,this.bookstat.leaveTime - this.bookstat.inTime);\r\n        },\r\n    },\r\n    mounted() {\r\n        this.bookstat = this.$store.state.bookstat;\r\n        // console.log(this.bookstat);\r\n        this.resolveData();\r\n    },\r\n    computed: {\r\n        fapiao() {\r\n            if (this.resinfo.isNeedInvoice == true) return 1;\r\n            else return 0;\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n.res-bg {\r\n    background: url(../assets/img/reservation.jpg);\r\n    background-size: cover;\r\n    height: 30vh;\r\n    border: 0px solid transparent;\r\n    border-bottom-left-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n}\r\n\r\n.text {\r\n    font-size: 14px;\r\n}\r\n\r\n.item {\r\n    padding: 9px 0;\r\n}\r\n\r\n.res-form {\r\n    margin: -5rem 1rem 1rem 1rem;\r\n}\r\n\r\n/* .el-card__body {\r\n    padding: 20px 20px 20px 0px;\r\n  } */\r\n\r\n.el-select {\r\n    width: 100%;\r\n}\r\n\r\n.room-price {\r\n    font-size: 1.3rem;\r\n    color: #f56c6c;\r\n}\r\n</style>\r\n"]}]}