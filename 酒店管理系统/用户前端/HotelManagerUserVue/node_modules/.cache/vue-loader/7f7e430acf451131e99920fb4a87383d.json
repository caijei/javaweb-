{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\src\\views\\reservation.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\src\\views\\reservation.vue","mtime":1678513043163},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678514552181},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1678514552606},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678514552181},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1678514554361}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport footbar from \"@/components/footbar.vue\";\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tbookstat: {},\n\t\t\troomNumber: '',\n\t\t\tresinfo: {\n\t\t\t\tnum: '',\n\t\t\t\tisNeedInvoice: false,\n\t\t\t},\n\t\t\tprice: 0,\n\t\t\tsumprice: 0,\n\t\t\tmaxp: 1,\n\t\t\tlockCondition: false,\n\t\t\tisNotSelect: true,\n\t\t\tcheckBtnDis: false,\n\t\t\tsearchicon: 'el-icon-search',\n\t\t\tsearchBtnType: 'primary',\n\t\t\tdialogVisible: false,\n\t\t\troomtype: \"\",\n\t\t}\n\t},\n\tcomponents: {\n\t\tfootbar,\n\t},\n\tmethods: {\n\t\tsubmitForm(formName) {\n\t\t\tthis.dialogVisible = true;\n\t\t},\n\t\tconfirmSubmitForm() {\n\t\t\tthis.dialogVisible = false;\n\t\t\tlet json = {\n\t\t\t\t\"roomId\": this.bookstat.roomid,\n\t\t\t\t\"inTime\": this.bookstat.inTime,\n\t\t\t\t\"leaveTime\": this.bookstat.leaveTime,\n\t\t\t\t\"realPeople\": this.resinfo.num,\n\t\t\t\t\"fapiao\": this.fapiao,\n\t\t\t};\n\t\t\tconsole.log(json);\n\t\t\tthis.axios.post(\"http://localhost:8090/user/bookRoom\", json)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.$router.push(\"/submitok\");\n\t\t\t\t})\n\t\t\t\t.catch(res => {\n\t\t\t\t\tthis.$router.push(\"/submitfail\");\n\t\t\t\t})\n\t\t},\n\t\tresolveData() {\n\t\t\t// console.log(123123);\n\t\t\tthis.axios.post(\"http://localhost:8090/user/roomDetail?roomId=\" + this.bookstat.roomid)\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.roomtype = res.data.data;\n\t\t\t\t\tconsole.log(this.roomtype);\n\t\t\t\t\tthis.maxp = this.roomtype.maxPeople;\n\t\t\t\t\tthis.price = this.roomtype.type.price;\n\t\t\t\t\tthis.calcPrice();\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tconsole.log(\"死了\");\n\t\t\t\t})\n\t\t},\n\t\tchangeTimeStr(str) {\n\t\t\tstr = str.toString();\n\t\t\tstr = str.replace(/ GMT.+$/, ''); // Or str = str.substring(0, 24)\n\t\t\tlet d = new Date(str);\n\t\t\tlet a = [d.getFullYear(), d.getMonth() + 1, d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds()];\n\t\t\tfor (var i = 0, len = a.length; i < len; i++) {\n\t\t\t\tif (a[i] < 10) {\n\t\t\t\t\ta[i] = '0' + a[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tstr = a[0] + '-' + a[1] + '-' + a[2] + ' ' + a[3] + ':' + a[4];\n\t\t\treturn str;\n\t\t},\n\t\tcalcPrice() {\n\t\t\tlet stra = this.bookstat.leaveTime;\n\t\t\tlet sa1 = stra.split(\" \")[0].split(\"-\");\n\t\t\tlet sa2 = stra.split(\" \")[1].split(\":\");\n\t\t\tlet leaveTime = new Date();\n\t\t\tleaveTime.setFullYear(sa1[0],sa1[1],sa1[2]);\n\t\t\tleaveTime.setHours(sa2[0]);\n\t\t\tleaveTime.setMinutes(sa2[1]);\n\t\t\tlet strb = this.bookstat.inTime;\n\t\t\tlet sb1 = strb.split(\" \")[0].split(\"-\");\n\t\t\tlet sb2 = strb.split(\" \")[1].split(\":\");\n\t\t\tlet inTime = new Date();\n\t\t\tinTime.setFullYear(sb1[0],sb1[1],sb1[2]);\n\t\t\tinTime.setHours(sb2[0]);\n\t\t\tinTime.setMinutes(sb2[1]);\n\t\t\tlet realday = (leaveTime - inTime) / 86400000;\n\t\t\t// console.log(Math.ceil(realday));\n\t\t\trealday = Math.ceil(realday);\n\t\t\tlet price = this.price;\n\t\t\tthis.sumprice = price * realday;\n\t\t\t// console.log(this.bookstat.leaveTime,this.bookstat.inTime,this.bookstat.leaveTime - this.bookstat.inTime);\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.bookstat = this.$store.state.bookstat;\n\t\t// console.log(this.bookstat);\n\t\tthis.resolveData();\n\t},\n\tcomputed: {\n\t\tfapiao() {\n\t\t\tif (this.resinfo.isNeedInvoice == true)\n\t\t\t\treturn 1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n}\n",{"version":3,"sources":["reservation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reservation.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-container class=\"wrapper\">\r\n\t\t\t<el-main class=\"section text-left\">\r\n\t\t\t\t<div class=\"res-bg\"></div>\r\n\t\t\t\t<el-card class=\"box-card res-form\">\r\n\t\t\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t\t\t<span>预订客房</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"text item\">\r\n\t\t\t\t\t\t<el-form :model=\"resinfo\" label-width=\"80px\">\r\n\t\t\t\t\t\t\t<el-form-item label=\"客房类型\" >\r\n\t\t\t\t\t\t\t\t<div>{{bookstat.roomType}}</div>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t\t\t<el-form-item label=\"入住时间\">\r\n\t\t\t\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t\t\t\t<div>{{bookstat.inTime}} 至</div>\r\n\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t\t<!-- <el-col class=\"line text-center\" :span=\"12\"></el-col> -->\r\n\t\t\t\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t\t\t\t<div>{{bookstat.leaveTime}}</div>\r\n\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<el-form-item label=\"房间号码\">\r\n\t\t\t\t\t\t\t\t<div>{{roomtype.number}}</div>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t\t\t<el-form-item label=\"住店人数\">\r\n\t\t\t\t\t\t\t\t<el-input-number v-model=\"resinfo.num\" :min=\"1\" :max=\"maxp\" label=\"请输入\" ></el-input-number>\r\n\t\t\t\t\t\t\t\t<span class=\"ml-1\">人</span>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<el-form-item label=\"提供发票\">\r\n\t\t\t\t\t\t\t\t<el-switch v-model=\"resinfo.isNeedInvoice\" ></el-switch>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<el-form-item label=\"价格\">\r\n\t\t\t\t\t\t\t\t<span v-model=\"resinfo.type\" class=\"room-price\">{{sumprice}} 元</span>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('ruleForm')\" >立即预订</el-button>\r\n\t\t\t\t\t\t\t\t<!-- <el-button @click=\"resetForm('ruleForm')\">重置</el-button> -->\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-card>\r\n\t\t\t\t<!--        <el-button type=\"success\" @click=\"oktest\">预订成功测试</el-button>\r\n        <el-button type=\"danger\" @click=\"failtest\">预订失败测试</el-button> -->\r\n\t\t\t</el-main>\r\n\t\t\t<el-footer class=\"footer\">\r\n\t\t\t\t<footbar></footbar>\r\n\t\t\t</el-footer>\r\n\r\n\t\t\t<el-dialog title=\"提示\" :visible.sync=\"dialogVisible\" width=\"95%\">\r\n\t\t\t\t<span>你确定要提交预订单吗？</span>\r\n\t\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button @click=\"dialogVisible = false\">取消</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"confirmSubmitForm\">确定</el-button>\r\n\t\t\t\t</span>\r\n\t\t\t</el-dialog>\r\n\r\n\r\n\t\t</el-container>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport footbar from \"@/components/footbar.vue\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbookstat: {},\r\n\t\t\t\troomNumber: '',\r\n\t\t\t\tresinfo: {\r\n\t\t\t\t\tnum: '',\r\n\t\t\t\t\tisNeedInvoice: false,\r\n\t\t\t\t},\r\n\t\t\t\tprice: 0,\r\n\t\t\t\tsumprice: 0,\r\n\t\t\t\tmaxp: 1,\r\n\t\t\t\tlockCondition: false,\r\n\t\t\t\tisNotSelect: true,\r\n\t\t\t\tcheckBtnDis: false,\r\n\t\t\t\tsearchicon: 'el-icon-search',\r\n\t\t\t\tsearchBtnType: 'primary',\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\troomtype: \"\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tfootbar,\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsubmitForm(formName) {\r\n\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t},\r\n\t\t\tconfirmSubmitForm() {\r\n\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\tlet json = {\r\n\t\t\t\t\t\"roomId\": this.bookstat.roomid,\r\n\t\t\t\t\t\"inTime\": this.bookstat.inTime,\r\n\t\t\t\t\t\"leaveTime\": this.bookstat.leaveTime,\r\n\t\t\t\t\t\"realPeople\": this.resinfo.num,\r\n\t\t\t\t\t\"fapiao\": this.fapiao,\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log(json);\r\n\t\t\t\tthis.axios.post(\"http://localhost:8090/user/bookRoom\", json)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.$router.push(\"/submitok\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(res => {\r\n\t\t\t\t\t\tthis.$router.push(\"/submitfail\");\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tresolveData() {\r\n\t\t\t\t// console.log(123123);\r\n\t\t\t\tthis.axios.post(\"http://localhost:8090/user/roomDetail?roomId=\" + this.bookstat.roomid)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.roomtype = res.data.data;\r\n\t\t\t\t\t\tconsole.log(this.roomtype);\r\n\t\t\t\t\t\tthis.maxp = this.roomtype.maxPeople;\r\n\t\t\t\t\t\tthis.price = this.roomtype.type.price;\r\n\t\t\t\t\t\tthis.calcPrice();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\tconsole.log(\"死了\");\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangeTimeStr(str) {\r\n\t\t\t\tstr = str.toString();\r\n\t\t\t\tstr = str.replace(/ GMT.+$/, ''); // Or str = str.substring(0, 24)\r\n\t\t\t\tlet d = new Date(str);\r\n\t\t\t\tlet a = [d.getFullYear(), d.getMonth() + 1, d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds()];\r\n\t\t\t\tfor (var i = 0, len = a.length; i < len; i++) {\r\n\t\t\t\t\tif (a[i] < 10) {\r\n\t\t\t\t\t\ta[i] = '0' + a[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tstr = a[0] + '-' + a[1] + '-' + a[2] + ' ' + a[3] + ':' + a[4];\r\n\t\t\t\treturn str;\r\n\t\t\t},\r\n\t\t\tcalcPrice() {\r\n\t\t\t\tlet stra = this.bookstat.leaveTime;\r\n\t\t\t\tlet sa1 = stra.split(\" \")[0].split(\"-\");\r\n\t\t\t\tlet sa2 = stra.split(\" \")[1].split(\":\");\r\n\t\t\t\tlet leaveTime = new Date();\r\n\t\t\t\tleaveTime.setFullYear(sa1[0],sa1[1],sa1[2]);\r\n\t\t\t\tleaveTime.setHours(sa2[0]);\r\n\t\t\t\tleaveTime.setMinutes(sa2[1]);\r\n\t\t\t\tlet strb = this.bookstat.inTime;\r\n\t\t\t\tlet sb1 = strb.split(\" \")[0].split(\"-\");\r\n\t\t\t\tlet sb2 = strb.split(\" \")[1].split(\":\");\r\n\t\t\t\tlet inTime = new Date();\r\n\t\t\t\tinTime.setFullYear(sb1[0],sb1[1],sb1[2]);\r\n\t\t\t\tinTime.setHours(sb2[0]);\r\n\t\t\t\tinTime.setMinutes(sb2[1]);\r\n\t\t\t\tlet realday = (leaveTime - inTime) / 86400000;\r\n\t\t\t\t// console.log(Math.ceil(realday));\r\n\t\t\t\trealday = Math.ceil(realday);\r\n\t\t\t\tlet price = this.price;\r\n\t\t\t\tthis.sumprice = price * realday;\r\n\t\t\t\t// console.log(this.bookstat.leaveTime,this.bookstat.inTime,this.bookstat.leaveTime - this.bookstat.inTime);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.bookstat = this.$store.state.bookstat;\r\n\t\t\t// console.log(this.bookstat);\r\n\t\t\tthis.resolveData();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tfapiao() {\r\n\t\t\t\tif (this.resinfo.isNeedInvoice == true)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.res-bg {\r\n\t\tbackground: url(../assets/img/reservation.jpg);\r\n\t\tbackground-size: cover;\r\n\t\theight: 30vh;\r\n\t\tborder: 0px solid transparent;\r\n\t\tborder-bottom-left-radius: 10px;\r\n\t\tborder-bottom-right-radius: 10px;\r\n\t}\r\n\r\n\t.text {\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.item {\r\n\t\tpadding: 9px 0;\r\n\t}\r\n\r\n\t.res-form {\r\n\t\tmargin: -5rem 1rem 1rem 1rem;\r\n\t}\r\n\r\n\t/* .el-card__body {\r\n    padding: 20px 20px 20px 0px;\r\n  } */\r\n\r\n\t.el-select {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.room-price {\r\n\t\tfont-size: 1.3rem;\r\n\t\tcolor: #F56C6C;\r\n\t}\r\n</style>\r\n"]}]}