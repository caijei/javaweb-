{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\babel-loader\\lib\\index.js!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\src\\views\\reservation-custom.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\src\\views\\reservation-custom.vue","mtime":1678513043163},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678514552181},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1678514552606},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678514552181},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\HotelManager\\src\\Hotel-Room-Reservation\\hotel-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1678514554361}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport footbar from \"@/components/footbar.vue\";\nexport default {\n  data: function data() {\n    return {\n      resinfo: {\n        id: '',\n        type: '',\n        indate: '',\n        leavedate: '',\n        num: '',\n        isNeedInvoice: false\n      },\n      price: 0,\n      sumprice: 0,\n      maxp: 1,\n      lockCondition: false,\n      isNotSelect: true,\n      checkBtnDis: false,\n      searchicon: 'el-icon-search',\n      searchBtnType: 'primary',\n      dialogVisible: false,\n      roomnumber: [],\n      roomtype: [],\n      rules: {\n        type: [{\n          required: true,\n          message: '请选择房间类型',\n          trigger: 'change'\n        }],\n        id: [{\n          required: true,\n          message: '请选择房间号',\n          trigger: 'change'\n        }],\n        indate: [{\n          type: 'date',\n          required: true,\n          message: '请选择入住时间',\n          trigger: 'change'\n        }],\n        leavedate: [{\n          type: 'date',\n          required: true,\n          message: '请选择离店时间',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  components: {\n    footbar: footbar\n  },\n  methods: {\n    submitForm: function submitForm(formName) {\n      this.dialogVisible = true;\n    },\n    resetForm: function resetForm(formName) {\n      this.checkBtnDis = false;\n      this.searchicon = 'el-icon-search';\n      this.searchBtnType = \"primary\";\n      this.isNotSelect = true;\n      this.price = 0;\n      this.sumprice = 0;\n      this.resinfo.isNeedInvoice = false;\n      this.$refs[formName].resetFields();\n    },\n    oktest: function oktest() {\n      this.$router.push(\"/submitok\");\n    },\n    failtest: function failtest() {\n      this.$router.push(\"/submitfail\");\n    },\n    confirmSubmitForm: function confirmSubmitForm() {\n      var _this = this;\n\n      this.dialogVisible = false;\n      var json = {\n        \"roomId\": parseInt(this.resinfo.id),\n        \"inTime\": this.changeTimeStr(this.resinfo.indate),\n        \"leaveTime\": this.changeTimeStr(this.resinfo.leavedate),\n        \"realPeople\": this.resinfo.num,\n        \"fapiao\": this.fapiao\n      };\n      console.log(json);\n      this.axios.post(\"http://localhost:8090/user/bookRoom\", json).then(function (res) {\n        _this.$router.push(\"/submitok\");\n      }).catch(function (res) {\n        _this.$router.push(\"/submitfail\");\n      });\n    },\n    resolveData: function resolveData() {\n      var _this2 = this;\n\n      // console.log(123123);\n      this.axios.get(\"http://localhost:8090/user/listTypes\").then(function (res) {\n        _this2.roomtype = res.data.data; // console.log(this.roomtype);\n      }).catch(function () {\n        console.log(\"死了\");\n      });\n    },\n    checkroom: function checkroom() {\n      var _this3 = this;\n\n      this.checkBtnDis = true;\n      this.searchicon = 'el-icon-loading';\n      this.axios.post(\"http://localhost:8090/user/listRoomsByTypeId\", {\n        \"typeId\": this.resinfo.type,\n        \"inTime\": this.changeTimeStr(this.resinfo.indate),\n        \"leaveTime\": this.changeTimeStr(this.resinfo.leavedate)\n      }).then(function (res) {\n        _this3.roomnumber = res.data.data;\n        console.log(_this3.roomnumber);\n        _this3.searchicon = \"el-icon-check\";\n        _this3.searchBtnType = \"success\";\n        _this3.isNotSelect = false;\n        _this3.lockCondition = true;\n        _this3.price = _this3.roomnumber[0].type.price;\n        _this3.maxp = _this3.roomnumber[0].maxPeople;\n\n        _this3.calcPrice();\n      }).catch(function () {\n        _this3.searchicon = \"el-icon-close\";\n        _this3.searchBtnType = \"danger\";\n        console.log(\"error\");\n      });\n    },\n    changeTimeStr: function changeTimeStr(str) {\n      str = str.toString();\n      str = str.replace(/ GMT.+$/, ''); // Or str = str.substring(0, 24)\n\n      var d = new Date(str);\n      var a = [d.getFullYear(), d.getMonth() + 1, d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds()];\n\n      for (var i = 0, len = a.length; i < len; i++) {\n        if (a[i] < 10) {\n          a[i] = '0' + a[i];\n        }\n      }\n\n      str = a[0] + '-' + a[1] + '-' + a[2] + ' ' + a[3] + ':' + a[4];\n      return str;\n    },\n    calcPrice: function calcPrice() {\n      var realday = Math.abs(this.resinfo.leavedate - this.resinfo.indate) / 86400000;\n      console.log(Math.ceil(realday));\n      realday = Math.ceil(realday);\n      var price = this.price;\n      this.sumprice = price * realday;\n      console.log(this.sumprice, price, realday);\n    }\n  },\n  mounted: function mounted() {\n    this.resolveData();\n  },\n  computed: {\n    fapiao: function fapiao() {\n      if (this.resinfo.isNeedInvoice == true) return 1;else return 0;\n    }\n  }\n};",{"version":3,"sources":["reservation-custom.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-container class=\"wrapper\">\r\n\t\t\t<el-main class=\"section text-left\">\r\n\t\t\t\t<div class=\"res-bg\"></div>\r\n\t\t\t\t<el-card class=\"box-card res-form\">\r\n\t\t\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t\t\t<span>预订客房</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"text item\">\r\n\t\t\t\t\t\t<el-form :model=\"resinfo\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"80px\" class=\"demo-ruleForm\">\r\n\t\t\t\t\t\t\t<el-form-item label=\"客房类型\" prop=\"type\" required @click=\"resolveData\">\r\n\t\t\t\t\t\t\t\t<el-select v-model=\"resinfo.type\" placeholder=\"请选择\" :disabled=\"lockCondition\">\r\n\t\t\t\t\t\t\t\t\t<el-option v-for=\"item in roomtype\" :key=\"item.id\" :label=\"item.typeName\" :value=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t\t\t<el-form-item label=\"入住时间\" required>\r\n\t\t\t\t\t\t\t\t<el-col :span=\"24\" class=\"mb-1\">\r\n\t\t\t\t\t\t\t\t\t<el-form-item prop=\"indate\">\r\n\t\t\t\t\t\t\t\t\t\t<el-date-picker :disabled=\"lockCondition\" type=\"datetime\" placeholder=\"入住日期\" v-model=\"resinfo.indate\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t\t<!-- <el-col class=\"line text-center\" :span=\"24\">至</el-col> -->\r\n\t\t\t\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t\t\t\t<el-form-item prop=\"leavedate\">\r\n\t\t\t\t\t\t\t\t\t\t<el-date-picker :disabled=\"lockCondition\" type=\"datetime\" placeholder=\"离店日期\" v-model=\"resinfo.leavedate\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t\t\t<el-button :type=\"searchBtnType\" @click=\"checkroom\" :disabled=\"checkBtnDis\">\r\n\t\t\t\t\t\t\t\t\t<i :class=\"searchicon\"></i>\r\n\t\t\t\t\t\t\t\t\t查询可用房间\r\n\t\t\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t\t\t<!-- 提供一个房间号码对房间id的映射，即用户选择的是房间号，但存的是房间id -->\r\n\t\t\t\t\t\t\t<el-form-item label=\"房间号码\" prop=\"id\" required>\r\n\t\t\t\t\t\t\t\t<el-select v-model=\"resinfo.id\" placeholder=\"请先选择房间类型\" :disabled=\"isNotSelect\">\r\n\t\t\t\t\t\t\t\t\t<el-option v-for=\"item in roomnumber\" :key=\"item.id\" :label=\"item.number\" :value=\"item.id\">\r\n\t\t\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t\t\t<el-form-item label=\"住店人数\" prop=\"num\" required>\r\n\t\t\t\t\t\t\t\t<el-input-number v-model=\"resinfo.num\" :min=\"1\" :max=\"maxp\" label=\"请输入\" :disabled=\"isNotSelect\"></el-input-number>\r\n\t\t\t\t\t\t\t\t<span class=\"ml-1\">人</span>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t<el-form-item label=\"提供发票\" prop=\"invoice\">\r\n\t\t\t\t\t\t\t\t<el-switch v-model=\"resinfo.isNeedInvoice\" :disabled=\"isNotSelect\"></el-switch>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t<el-form-item label=\"价格\">\r\n\t\t\t\t\t\t\t\t<span v-model=\"resinfo.type\" class=\"room-price\">{{sumprice}} 元</span>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('ruleForm')\" :disabled=\"isNotSelect\">立即预订</el-button>\r\n\t\t\t\t\t\t\t\t<el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-card>\r\n\t\t\t\t<!--        <el-button type=\"success\" @click=\"oktest\">预订成功测试</el-button>\r\n        <el-button type=\"danger\" @click=\"failtest\">预订失败测试</el-button> -->\r\n\t\t\t</el-main>\r\n\t\t\t<el-footer class=\"footer\">\r\n\t\t\t\t<footbar></footbar>\r\n\t\t\t</el-footer>\r\n\r\n\t\t\t<el-dialog title=\"提示\" :visible.sync=\"dialogVisible\" width=\"95%\">\r\n\t\t\t\t<span>你确定要提交预订单吗？</span>\r\n\t\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t\t<el-button @click=\"dialogVisible = false\">取消</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"confirmSubmitForm\">确定</el-button>\r\n\t\t\t\t</span>\r\n\t\t\t</el-dialog>\r\n\r\n\r\n\t\t</el-container>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport footbar from \"@/components/footbar.vue\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tresinfo: {\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t\ttype: '',\r\n\t\t\t\t\tindate: '',\r\n\t\t\t\t\tleavedate: '',\r\n\t\t\t\t\tnum: '',\r\n\t\t\t\t\tisNeedInvoice: false,\r\n\t\t\t\t},\r\n\t\t\t\tprice: 0,\r\n\t\t\t\tsumprice: 0,\r\n\t\t\t\tmaxp: 1,\r\n\t\t\t\tlockCondition: false,\r\n\t\t\t\tisNotSelect: true,\r\n\t\t\t\tcheckBtnDis: false,\r\n\t\t\t\tsearchicon: 'el-icon-search',\r\n\t\t\t\tsearchBtnType: 'primary',\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\troomnumber: [],\r\n\t\t\t\troomtype: [],\r\n\t\t\t\trules: {\r\n\t\t\t\t\ttype: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择房间类型',\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tid: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择房间号',\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tindate: [{\r\n\t\t\t\t\t\ttype: 'date',\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择入住时间',\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tleavedate: [{\r\n\t\t\t\t\t\ttype: 'date',\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择离店时间',\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tfootbar,\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsubmitForm(formName) {\r\n\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t},\r\n\t\t\tresetForm(formName) {\r\n\t\t\t\tthis.checkBtnDis = false;\r\n\t\t\t\tthis.searchicon = 'el-icon-search';\r\n\t\t\t\tthis.searchBtnType = \"primary\";\r\n\t\t\t\tthis.isNotSelect = true;\r\n\t\t\t\tthis.price = 0;\r\n\t\t\t\tthis.sumprice = 0; \r\n\t\t\t\tthis.resinfo.isNeedInvoice = false;\r\n\t\t\t\tthis.$refs[formName].resetFields();\r\n\t\t\t},\r\n\t\t\toktest() {\r\n\t\t\t\tthis.$router.push(\"/submitok\");\r\n\t\t\t},\r\n\t\t\tfailtest() {\r\n\t\t\t\tthis.$router.push(\"/submitfail\");\r\n\t\t\t},\r\n\t\t\tconfirmSubmitForm() {\r\n\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\tlet json = {\r\n\t\t\t\t\t\"roomId\": parseInt(this.resinfo.id),\r\n\t\t\t\t\t\"inTime\": this.changeTimeStr(this.resinfo.indate),\r\n\t\t\t\t\t\"leaveTime\": this.changeTimeStr(this.resinfo.leavedate),\r\n\t\t\t\t\t\"realPeople\": this.resinfo.num,\r\n\t\t\t\t\t\"fapiao\": this.fapiao,\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log(json);\r\n\t\t\t\tthis.axios.post(\"http://localhost:8090/user/bookRoom\", json)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.$router.push(\"/submitok\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(res => {\r\n\t\t\t\t\t\tthis.$router.push(\"/submitfail\");\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tresolveData() {\r\n\t\t\t\t// console.log(123123);\r\n\t\t\t\tthis.axios.get(\"http://localhost:8090/user/listTypes\")\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.roomtype = res.data.data;\r\n\t\t\t\t\t\t// console.log(this.roomtype);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\tconsole.log(\"死了\");\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcheckroom() {\r\n\t\t\t\tthis.checkBtnDis = true;\r\n\t\t\t\tthis.searchicon = 'el-icon-loading';\r\n\t\t\t\tthis.axios.post(\"http://localhost:8090/user/listRoomsByTypeId\", {\r\n\t\t\t\t\t\t\"typeId\": this.resinfo.type,\r\n\t\t\t\t\t\t\"inTime\": this.changeTimeStr(this.resinfo.indate),\r\n\t\t\t\t\t\t\"leaveTime\": this.changeTimeStr(this.resinfo.leavedate)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.roomnumber = res.data.data;\r\n\t\t\t\t\t\tconsole.log(this.roomnumber);\r\n\t\t\t\t\t\tthis.searchicon = \"el-icon-check\";\r\n\t\t\t\t\t\tthis.searchBtnType = \"success\";\r\n\t\t\t\t\t\tthis.isNotSelect = false;\r\n\t\t\t\t\t\tthis.lockCondition = true;\r\n\t\t\t\t\t\tthis.price = this.roomnumber[0].type.price;\r\n\t\t\t\t\t\tthis.maxp = this.roomnumber[0].maxPeople;\r\n\t\t\t\t\t\tthis.calcPrice();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\tthis.searchicon = \"el-icon-close\";\r\n\t\t\t\t\t\tthis.searchBtnType = \"danger\";\r\n\t\t\t\t\t\tconsole.log(\"error\");\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangeTimeStr(str) {\r\n\t\t\t\tstr = str.toString();\r\n\t\t\t\tstr = str.replace(/ GMT.+$/, ''); // Or str = str.substring(0, 24)\r\n\t\t\t\tlet d = new Date(str);\r\n\t\t\t\tlet a = [d.getFullYear(), d.getMonth() + 1, d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds()];\r\n\t\t\t\tfor (var i = 0, len = a.length; i < len; i++) {\r\n\t\t\t\t\tif (a[i] < 10) {\r\n\t\t\t\t\t\ta[i] = '0' + a[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tstr = a[0] + '-' + a[1] + '-' + a[2] + ' ' + a[3] + ':' + a[4];\r\n\t\t\t\treturn str;\r\n\t\t\t},\r\n\t\t\tcalcPrice() {\r\n\t\t\t\tlet realday = Math.abs(this.resinfo.leavedate - this.resinfo.indate) / 86400000;\r\n\t\t\t\tconsole.log(Math.ceil(realday));\r\n\t\t\t\trealday = Math.ceil(realday);\r\n\t\t\t\tlet price = this.price;\r\n\t\t\t\tthis.sumprice = price * realday;\r\n\t\t\t\tconsole.log(this.sumprice, price, realday);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.resolveData();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tfapiao() {\r\n\t\t\t\tif (this.resinfo.isNeedInvoice == true)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.res-bg {\r\n\t\tbackground: url(../assets/img/reservation.jpg);\r\n\t\tbackground-size: cover;\r\n\t\theight: 30vh;\r\n\t\tborder: 0px solid transparent;\r\n\t\tborder-bottom-left-radius: 10px;\r\n\t\tborder-bottom-right-radius: 10px;\r\n\t}\r\n\r\n\t.text {\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.item {\r\n\t\tpadding: 9px 0;\r\n\t}\r\n\r\n\t.res-form {\r\n\t\tmargin: -5rem 1rem 1rem 1rem;\r\n\t}\r\n\r\n\t/* .el-card__body {\r\n    padding: 20px 20px 20px 0px;\r\n  } */\r\n\r\n\t.el-select {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.room-price {\r\n\t\tfont-size: 1.3rem;\r\n\t\tcolor: #F56C6C;\r\n\t}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}